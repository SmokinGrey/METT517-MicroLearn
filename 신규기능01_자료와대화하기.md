# 신규 기능 "자료와 대화하기" 개발 로드맵

---

## 1. 개요

- **기능명:** 자료와 대화하기 (Chat with Your Document)
- **목표:** 사용자가 업로드한 문서의 내용에 대해 자유롭게 질문하고, AI로부터 문서에 기반한 신뢰도 높은 답변을 얻는 대화형 학습 환경을 제공한다. 이를 통해 정적(Static)인 자료 생성 서비스를 동적(Interactive)인 학습 보조 도구로 발전시킨다.
- **핵심 기술:** 검색 증강 생성 (RAG, Retrieval-Augmented Generation)

---

## 2. 개발 단계 및 상세 과업

### **Phase 1: 핵심 백엔드 구현 (RAG 파이프라인 구축)**

> **기간:** 2주
> **목표:** 사용자의 질문에 대해 문서 내용을 기반으로 답변을 생성하는 핵심 API 개발

| Task ID | 과업명 | 상세 내용 | 기술 스택/라이브러리 |
| :--- | :--- | :--- | :--- |
| **BE-1.1** | 벡터 DB 선정 및 설정 | - 프로젝트 환경에 적합한 벡터 DB를 선정하고 기본 설정을 완료한다.<br>- **선정 제안:** 초기 버전은 설정이 간편한 `ChromaDB` 또는 `FAISS` (In-memory/File-based)로 시작하여 빠르게 프로토타입을 구축한다. | `chromadb` / `faiss-cpu` |
| **BE-1.2** | 문서 처리 파이프라인 구축 | - **(입력)** 학습 자료 생성 시 원본 텍스트를 입력받는다.<br>- **(분할)** 텍스트를 의미 있는 단위(Chunk)로 분할한다.<br>- **(임베딩)** 분할된 각 Chunk를 Google Embedding 모델 API를 통해 벡터로 변환한다.<br>- **(저장)** 변환된 벡터와 원본 Chunk 텍스트, 메타데이터(문서 ID 등)를 벡터 DB에 저장한다. | `langchain` 또는 커스텀 로직 |
| **BE-1.3** | 검색 및 답변 생성 로직 구현 | - **(검색)** 사용자 질문을 임베딩하여 벡터 DB에서 가장 관련성 높은 Chunk들을 검색(Similarity Search)한다.<br>- **(프롬프트 구성)** 검색된 Chunk들과 원본 질문을 조합하여 Gemini API에 전달할 프롬프트를 동적으로 생성한다.<br>- **(답변 생성)** Gemini API를 호출하여 최종 답변을 생성한다. | `google-generativeai` |
| **BE-1.4** | 채팅 API 엔드포인트 개발 | - 특정 학습 자료와 대화할 수 있는 신규 API 엔드포인트를 개발한다.<br>- **엔드포인트(안):** `POST /api/materials/{material_id}/chat` | `fastapi` |

### **Phase 2: 핵심 프론트엔드 구현 (채팅 UI 개발)**

> **기간:** 1주
> **목표:** 사용자가 질문을 입력하고 AI의 답변을 확인할 수 있는 최소 기능의 채팅 인터페이스 구현

| Task ID | 과업명 | 상세 내용 | 기술 스택/라이브러리 |
| :--- | :--- | :--- | :--- |
| **FE-2.1** | 채팅 컴포넌트 개발 | - `MaterialDetailPage` 내에 질문 입력창, 대화 내용 표시 영역 등 채팅 UI 컴포넌트를 개발한다. | `react` |
| **FE-2.2** | API 연동 | - 채팅 컴포넌트에서 백엔드의 신규 채팅 API(`BE-1.4`)를 호출하고, 답변을 받아 화면에 렌더링한다. | `fetch` API |
| **FE-2.3** | 상태 관리 | - 대화 내역, API 요청 상태(로딩, 에러) 등을 관리하는 로직을 구현한다. | `zustand` 또는 `useState` |

### **Phase 3: 1차 통합 및 테스트**

> **기간:** 1주
> **목표:** 백엔드와 프론트엔드를 통합하여 MVP(최소 기능 제품)를 완성하고, 사용성을 검증한다.

| Task ID | 과업명 | 상세 내용 |
| :--- | :--- | :--- |
| **INT-3.1**| End-to-End 테스트 | - 자료 업로드 → 자료 생성 → 상세 페이지 이동 → 채팅 기능 사용까지의 전체 흐름을 테스트하고 버그를 수정한다. |
| **INT-3.2**| 기본 인용(Citation) 기능 | - AI 답변의 근거가 된 원본 텍스트 Chunk들을 답변 하단에 목록 형태로 간단히 표시해준다. |

### **Phase 4: 기능 고도화 (선택적)**

> **기간:** 2주
> **목표:** 사용자 경험 향상 및 기능 완결성 확보

| Task ID | 과업명 | 상세 내용 |
| :--- | :--- | :--- |
| **ENH-4.1**| 실시간 답변 스트리밍 | - AI가 답변을 생성하는 대로 즉시 화면에 타이핑하듯 보여주는 스트리밍 기능을 구현하여 대기 시간을 줄인다. (백엔드 `StreamingResponse` + 프론트엔드 `ReadableStream` 활용) |
| **ENH-4.2**| 대화 기록 저장/복원 | - 특정 자료에 대한 이전 대화 기록을 DB에 저장하고, 사용자가 페이지에 다시 방문했을 때 복원해주는 기능을 구현한다. |
| **ENH-4.3**| 인터랙티브 인용 | - 답변에 포함된 인용(Citation)을 클릭하면, 원본 문서 뷰어의 해당 텍스트 위치로 스크롤되는 기능을 구현한다. |

---

## 3. 총 예상 기간

- **MVP(Phase 1-3) 완료까지:** 약 **4주**
- **고도화(Phase 4) 포함 시:** 약 **6주**

*위 일정은 개발팀의 리소스 상황에 따라 변동될 수 있습니다.*
